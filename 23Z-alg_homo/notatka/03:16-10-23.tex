\section{16.10.23 : Funktory reprezentowalne i granice}

\subsection{Kategoria funktorów}

W kategorii $\mathbf{Set}$ zbiór $X\in \ob\mathbf{Set}$ możemy widzieć jako $Hom_{\mathbf{Set}}(1,X)$ gdzie $1$ jest singletonem. Robimy to utożsamiając element $x\in X$ z morfizmem $1\mapsto x\in Hom_{\mathbf{Set}}(1, X)$.

Uogólniając obserwację wyżej, w dowolnej kategorii $\mathbf{C}$ obiektowi $X$ możemy przypisać funktor 
    $$h_X:\mathbf{C}^{op}\to \mathbf{Set}$$
    $$h_X(Y)=Hom_{\mathbf{C}}(Y, X) \; (\star)$$
    gdzie $(\star)$ zapisujemy czasem jako $X(Y)$.

    Ponieważ nie we wszystkich kategoriach istnieje odpowiednik singletona $1$, musimy rozważać wszystkie obiekty $Y$ i morfizmy:
    
    \begin{center}\begin{tikzcd}[column sep = large]
      %Y \arrow[r, "f"] & Y' \arrow[r, rightsquigarrow] & h_X(Y') \arrow[r, "h_X(f)"] & h_X(Y')
      Y \arrow[r, "f"] \arrow[d, "\alpha" left] & Y' \arrow[d, "\alpha\circ f"] \\
      X \arrow[r, squiggly, no head, "h_X(f)" below] & X
    \end{tikzcd}\end{center}
    dobrane tak, że diagram komutuje.

    %Tutaj równanie $(\star)$ można również zapisać jako $X(Y)$, czyli rozumieć jako $Y$-punkty obiektu $X$.

    Możemy też definiować funktor kowariantny $g:\mathbf{C}\to\mathbf{Set}$ taki, że $g_X(Y)=Hom_{\mathbf{C}}(X, Y)$.

\begin{definition}[Kategoria funktorów i funktory reprezentowalne]
  \acc{Kategorię funktorów} $(C^{op},\mathbf{Set})$, której obiektami są $h_X$ jak w przykładzie wyżej, oznaczamy $\hat{\mathbf{C}}$. 

  Funktor $F\in\hat{\mathbf{C}}$ jest \buff{reprezentowalny}, jeśli $F\cong h_X$ dla pewnego $X\in Ob\mathbf{C}$. Takie $X$ jest jedyne z dokładnością do izomorfizmu.
 
  Dla morfizmu $X\xrightarrow{\phi} X'$ w $\mathbf{C}$ określamy morfizm $h_\phi:h_X\to h_{X'}$ w $\mathbf{\hat{C}}$.

  \begin{center}\begin{tikzcd}[column sep=large, row sep = small]
    Hom_{\mathbf{C}}(Y,X) \arrow[r, "h_\phi"] & Hom_{\mathbf{C}}(Y,X')\\
    \alpha\arrow[u, phantom, sloped, "\in"] \arrow[r] & \phi\circ\alpha\arrow[u, phantom, sloped, "\in"]
  \end{tikzcd}\end{center}
\end{definition}

Funktor $h_X$ można również oznaczyć jako $Hom_{\mathbf{C}}(-, X)$. Wówczas dla morfizmu $\phi:Y\to Y'$ mamy 
$$h_\phi(\alpha)=Hom_{\mathbf{C}}(\phi, X)(\alpha)=\phi\circ\alpha$$
dla $\alpha\in Hom_{\mathbf{C}}(-, X)$

\begin{example}
  \item $\set{P}(X):\mathbf{Set}\to\mathbf{Set}$ jest funktorem, który przypisuje $X$ jest zbiór potęgowy. Jest on reprezentowalny, bo $\set{P}(X)\cong Hom(X, 2)$.
    
    Dla dowolnego zbioru $X\in\mathbf{Set}$ naturalne przekształcenie $f(X):Hom(X, 2)\to \set{P}(X)$ przypisze funkcji $\alpha\in Hom(X, 2)$ zbiór tych elementów $x\in X$ dla których $\alpha(x) = 2$. Przekształcenie odwrotne do tego przypisze zbiorowi $A\in\set{P}(X)$ funkcję $\alpha:X\to 2$ taką, że $\alpha(x)=1$ jeśli $x\notin A$ i $\alpha(x)=2$ wpp.

  \item Funktor kohomologii $H^n:\mathbf{C}\to\mathbf{Ab}$ z kategorii $CW$-kompleksów w grupy abelowe taki, że $H^n(X,G)=[X,K(G, n)]$ jest funktorem reprezentowalnym. Pokazuje to twierdzenie Browna o reprezentowalności o którym uczy się przy okazji topologii algebraicznej.
    %\emph{\large\color{red}NIE JESTEM PEWNA CO TO OZNACZA? chyba nie homotopie}
  
  \item Grassmmanian - wiązki wektorowe $Vect_n(X)=[X, C^\infty]$.
    %{\large\color{red}co tutaj mają do roboty wiązki styczne?} $Vect_n(X)=[X,C^\infty]$????
\end{example}

Przyporządkowania $X\mapsto h_X$ oraz $\phi\mapsto h_\phi$ indukują funktor $h:\mathbf{C}\to\mathbf{\hat{C}}$.

\begin{lemma}[Yoneda lemma]
  Przyporządkowanie $h:\mathbf{C}\to\mathbf{\hat{C}}$ zadaje równoważność kategorii $\mathbf{C}$ z pełną podkategorią kategorii $\mathbf{\hat{C}}$, której obiektami są funktory reprezentowalne.
\end{lemma}

\begin{proof}
  Wystarczy pokazać, że $h$ jest funktorem wiernym, pełnym i w zasadzie surjektywnym. To znaczy, mając diagram

  \begin{center}\begin{tikzcd}[column sep=large]
    X\arrow[d, "\phi" left]\arrow[r, "h(X)"] & h_X=Hom_{\mathbf{C}}(-, X)\arrow[d, "h_\phi"]\\ 
    X'\arrow[r, "h(X')"] & h_{X'}=Hom_{\mathbf{C}}(-, X')
  \end{tikzcd}\end{center}
  
  $h_\phi$ jest w jednoznaczny sposób przypisane do $\phi$.
  
  Inaczej: chcemy pokazać, że $h$ 
  \begin{center}\begin{tikzcd}[column sep=large]
    Hom_{\mathbf{C}}(X, X')\arrow[r] & Hom_{\hat{\mathbf{C}}}(h_X, h_{X'})\\ 
    \phi\arrow[r, blue, "h"]\arrow[u, phantom, sloped, "\in"] & h_\phi\arrow[u, phantom, sloped, "\in"]
  \end{tikzcd}\end{center}
  jest bijekcją.

  Jeśli dwa morfizmy $\phi,\psi\in Hom_{\mathbf{C}}(X, X')$ przechodzą na to samo, tzn. $h_\phi=h_\psi$ to wówczas dla dowolnego $Y$ i dowolnego $\alpha\in Hom_{\mathbf{C}}(Y, X)$ zachodzi $\phi\circ \alpha=\psi\circ\alpha\in Hom_{\mathbf{C}}(Y, X')$. W szczególności dla $Y=X$ oraz $\alpha=id_X$ mamy 
  $$\phi\circ id_X=\psi\circ id_X\implies \phi=\psi.$$
  Weźmy teraz dowolny $h_\phi\in Hom_{\mathbf{\hat{C}}}(h_X, h_{X'})$. Tak jak wcześniej, ustalając $Y$ i $\alpha$ dostajemy 
  $$h_\phi(\alpha):h_X(Y)\to h_{X'}(Y).$$
  Jeśli $Y=X$ i $\alpha=id_X$, to $h_\phi(id_X):h_X(X)\to h_{X'}$ jest morfizmem $h_\phi(id_X):X\to X'$. Jest to potencjalny element $h_\phi(id_X)=\psi$, który przechodzi na $h_\phi$ przez funktor $h$. Wystarczy sprawdzić, że 
  $$h_\psi(\alpha)=h_\phi(\alpha)$$
  dla dowolnego $Y$ i $\alpha :Y\to X$.
  $$h_\psi(\alpha)=\psi\circ\alpha=(\phi\circ id_X)\circ \alpha=\phi\circ (id_X\circ \alpha)=\phi\circ \alpha=h_\phi(\alpha).$$

  W zasadzie surjektywność tego funktora wynika z definicji funktora reprezentowalnego, która wymaga by przychodził on z obiektem z kategorii $\mathbf{C}$.

%
%
%
%
%
%
%  Musimy pokazać, że
%
%  \begin{center}\begin{tikzcd}[column sep=large, row sep=small]
%    Hom_{\mathbf{C}}(X, X')\arrow[r, "\sim"] & Hom_{\mathbf{\hat{C}}}(h_X, h_{X'})\\
%    \phi\arrow[u, phantom, sloped, "\in"]\arrow[r] & h_\phi\arrow[u, phantom, sloped, "\in"]
%  \end{tikzcd}\end{center}
%
%  jest bijekcją.
%  
%  Jeśli funktor $F\in\mathbf{\hat{C}}$ jest reprezentowalny, to reprezentujący go obiekt jest jedyny z dokładnością do izomorfizmu, bo
%
%  \begin{center}\begin{tikzcd}
%    & F\arrow[dr, "\cong"] \arrow[dl, "\cong" left]\\
%    h_X\arrow[rr, rightsquigarrow, "\star\star", bend left=20] & & h_{X'}\\
%    X\arrow[rr, "\star"] & & X'
%  \end{tikzcd}\end{center}
%
%  izomorfizm $\star$ pojawia się bezpośrednio po tym, że $F\to h_X$ i $F\to h_{X'}$ są izmorfizmami z definicji i od razu zadają izomorfizm $\star\star$.
%
%  Niech teraz $F\in Hom_{\mathbf{\hat{C}}}(h_X,h_{X'})$.
%
%  Jeśli $F=h_{\mathbf{C}}$, to mamy
%  \begin{center}\begin{tikzcd}[column sep=large]
%     h_X(X)\ni id_X\arrow[r, bend left=30, "h_\phi"]\arrow[r, bend right=30, "f"] & h_{X'}(X)
%  \end{tikzcd}\end{center}
%
  %{\large\color{red}DOKOŃCZYĆ}

\end{proof}

\subsection{Granice i kogranice}

Czyli o granicach odwrotnych [granica] i prostych [kogranica].

%\begin{definition}[system prosty i odwrotny]
%  Niech $\mathbf{C}$ będzie kategorią, a $I$ zbiorem uporządkowanym. Układ $\{X_i, h_{ij}\}$ obiektów $\mathbf{C}$, gdzie dla $i\leq j$ $h_{ij}:X_i\to X_j$ są morfizmami w $\mathbf{C}$, nazywamy \buff{systemem prostym}, jeżeli
%  \begin{enumerate}
%    \item dla każdego $i\in I$ mamy $h_{ii}=id_{X_i}$
%    \item jeśli $i\leq j\leq k$, to komutuje następujący diagram
%      \begin{center}\begin{tikzcd}
%        X_i\arrow[r, "h_{ij}"] \arrow[dr, "h_{ik}" below left] & X_j\arrow[d, "h_{jk}"] \\ 
%                                                    & X_k
%      \end{tikzcd}\end{center}
%  \end{enumerate}
%
%  Jeżeli z kolei mamy układ spełniający warunek 1, ale zamiast diagramu w warunku 2. komutuje diagram
%  \begin{center}\begin{tikzcd}
%    X_k\arrow[r, "h_{jk}"]\arrow[dr, "h_{ik}" below left] & X_j \arrow[d, "h_{ij}"] \\ 
%                                                         & X_i
%  \end{tikzcd}\end{center}
%  to taki układ nazywamy \buff{systemem odwrotnym}
%\end{definition}

Niech $I$ będzie małą kategorią, a $F:I\to\mathbf{C}$ będzie funktorem.

\begin{definition}[granica funktora $F$]
  Obiekt $X$ z rodziną odwzorowań (zbiorem morfizmów) $\Pi_i:X\to F(i)$ dla $X\in Ob\mathbf{C}$ , które spełniają
  \begin{itemize}
    \item \acc{[zgodność]} dla dowolnych $i\xrightarrow{\alpha}j$ w $I$ diagram
      \begin{center}\begin{tikzcd}
        & X\arrow[dl, "\Pi_i" above left]\arrow[dr, "\Pi_j"]\\
        F(i)\arrow[rr, "F(\alpha)" below] & & F(j)
      \end{tikzcd}\end{center}
      komutuje, tzn. $\Pi_j=F(\alpha)\circ\Pi_i$.
    \item \acc{[uniwersalność]} dla każdego układu $(X',\Pi_i')$ spełniającego poprzedni warunek istnieje jedyny morfizm $\lambda:X'\to X$ taki, że dla każdego $i\in I$ diagram
      \begin{center}\begin{tikzcd}
      X'\arrow[rr, "\exists!\lambda", dashed]\arrow[dr, "\Pi_i'" below left] & & X\arrow[dl, "\Pi_i"]\\
      & F(i)
    \end{tikzcd}\end{center}
    komutuje
  \end{itemize}
  jest nazywany \buff{granicą funktora $F$} i oznaczamy ją jako $\lim F=X$.
\end{definition}

Granica funktora może nie istnieć, ale zawsze gdy istnieje, to jest jedyna z dokładnością do izomorfizmu.

\begin{example}
  \item Dla $I=\{0,1\}$ oraz $F:I\to \mathbf{C}$ granicę $\lim F$ nazywamy \acc{produktem} obiektów $F(0)$ i $F(1)$
    \begin{center}\begin{tikzcd}[column sep=large]
      X\arrow[r, "\Pi_1"]\arrow[d, "\Pi_0" left]\arrow[dr, dashed] & F(1)\\
      F(0) & X'\arrow[l, "\Pi_0'"]\arrow[u, "\Pi_1'" right]
    \end{tikzcd}\end{center}
  \item Jeśli rozważymy zbiór liniowo uporządkowany, gdzie obiekty to zbiory, a morfizm $A\to B$ oznacza, że $A\leq B$. Wtedy granicą jest element maksymalny tego zbioru (jeśli istnieje).
\end{example}

\begin{definition}[granica odwrotna]
  Analogicznie jak w definicji granicy, obiekt $X$ wraz z rodziną odwzorowań $\Pi_i:F(i)\to X$ takich, że jeśli dla $i,j\in I$ oraz morfizmu \begin{tikzcd}i\arrow[r, "\alpha"] & j\end{tikzcd} komutuje diagram
  \begin{center}\begin{tikzcd}
    & X \\ 
    F(i) \arrow[ur, "\Pi_i"] \arrow[rr, "F(\alpha)" below] & & F(j) \arrow[ul, "\Pi_j" above right]
  \end{tikzcd}\end{center}
  nazywamy granicą odwrotną i oznaczamy $\color{blue}\colim F$, jeśli spełnia ona warunek uniwersalności, tzn. jeśli istnieje $X'$ oraz przekształcenia $\Pi$, to istnieje dokładnie jeden morfizm $\lambda:X'\to X$:
  \begin{center}\begin{tikzcd}
    & F(i) \arrow[dr, "\Pi_i"] \arrow[dl, "\Pi_i'" above left] \\ 
    X \arrow[rr, "\exists!\lambda" below, dashed] & & X'
  \end{tikzcd}\end{center}
\end{definition}

\begin{example}
\item W kategorii $\mathbf{Set}$ koprodukt to suma mnogościowa zbiorów.
\item Rozważając zbiór liniowo uporządkowany z morfizmami odpowiadającymi porządkowi, to kogranicą takiej kategorii jest element minimalny.
\item W kategorii $\mathbf{Grp}$ granicą odwrotną jest koprodukt dwóch grup zdefiniowany za pomocą ich reprezentacji:
  $$G_0=\land g_1, g_2,...,g_k\;|\;r_1,...,r_n\rangle$$
  $$G_1=\land h_1, h_2,...,h_l\;|\;s_1,....s_m\rangle$$
  $$G_1\star G_0=\langle g_1,...,g_k, h_1,...,h_l\;|\;r_1,...,r_n, s_1,...,s_m\rangle$$
  gdzie $g_1,...,g_k$ to generatory $G_0$, a $r_1,...r_n$ to relacje w grupie $G_0$ (co daje element neutralny).
\end{example}
