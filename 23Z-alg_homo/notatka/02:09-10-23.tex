\section{09.10.23 : Równoważność kategorii}

\subsection{Presnop i snop}

%\begin{definition}[Presnop]
  Niech $X$ będzie przestrzenią topologiczną i związaną z nią kategorię $\mathbf{Otw(X)}$ zdefiniujemy tak, że
  \begin{itemize}
    \item $\ob\mathbf{Otw(X)}=\{U\subseteq X\;:\;U\text{ - zbiór otwarty}\}$
    \item morfizmy to włożenia identycznościowe (tzn. istnieje morfizm $X\hookrightarrow Y$ jeśli $X\subseteq Y$)
  \end{itemize}

  Tak zdefiniowany funktor kontrawariantny $\mathbf{Otw(X)}^{op}\to \mathbf{C}$ nazywamy \buff{presnopem} na przestrzeni topologicznej $X$.
%\end{definition}

%Zamiast kategorii zbiorów $\mathbf{Set}$ możemy też mieć snop na kategorię grup abelowych, przestrzeni liniowych etc.
  Kategoria $\mathbf{C}$ może być kategorią zbiorów $\mathbf{Set}$, ale możemy też przeprowadzać zbiory otwarte oraz morfizmy między nimi na kategorię $\mathbf{Ab}$, $\mathbf{Vect}_K$ czy $R-\mathbf{mod}$. Wtedy taki funktor będziemy nazywać odpowiednio \acc{presnopem grup abelowych, przestrzeni liniowych czy $R$-modułów}.

\begin{example}
\item Zaczniemy od przetestowania presnopu na przestrzeni topologicznej w akcji.

  Niech $X$ będzie przestrzenią topologiczną, a $U\subseteq X$ będzie dowolnym zbiorem otwartym. Funktor $F:\mathbf{Otw(X)}^{op}\to {C(X)}$ definiujemy na obiektach jako
  $$F(U)=C(U)=\{f:U\to\C\;|\;f\text{ ciągła}\}$$
  Dla $V\subseteq U\subseteq X$ otwartych zbiorów mamy

  \begin{center}
    \begin{tikzcd}[row sep=tiny, column sep = large]
      F(U)\arrow[d, phantom, sloped, "="] & F(V)\arrow[l, "\text{obcięcie}" above]\arrow[d, phantom, sloped, "="]\\
      C(U) & C(V)\arrow[l]
    \end{tikzcd}
  \end{center}

  co w widoczny sposób spełnia $F(\phi\psi)=F(\phi)F(\psi)$.

  Funktor jak wyżej jest nazywany presnopem funkcji ciągłych.
\end{example}

\begin{definition}[presnop, snop]
  \buff{Presnopem} na kategorii $\mathbf{C}$ nazywamy dowolny funktor
  $$F:\mathbf{C}^{op}\to\mathbf{Set}$$

  \buff{Snopem} nazywamy presnop taki, że jeśli dla dowolnego zbioru $U=\bigcup_{i\in I}U_i$ oraz dla dowolnych $i,j\in I$ spełniony jest warunek
  $$s_i\restriction(U_i\cap U_j)=s_j\restriction(U_i\cap U_j),$$
  gdzie $s_i\in F(U_i)$ jest nazywane \acc{cięciem presnopu}, to wówczas istnieje dokładnie jedyne cięcie $s\in F(U)$ takie, że
  $$s\restriction U_i=s_i.$$
  Zapisując to za pomocą kwantyfikatorów mamy:
  \begin{align*}
    (\forall\;U=\bigcup_{i\in I}U_i)
    (\forall\;s_i\in F(U_i))\;
    &\left[ 
      (\forall i,j\in I)\;
      s_i\restriction(U_i\cap U_j)=s_j\restriction(U_i\cap U_j) 
    \right]
    \implies\\
    &\implies\left[
      (\exists!\;s\in F(U))
      (\forall i\in I)\;s\restriction U_i=s_i
    \right]
  \end{align*}
\end{definition}

\begin{example}
  \item Presnop na przestrzeni topologicznej $X$ spełnia również warunek opisany wyżej.
    %Przykład  z wcześniej spełnia również warunek bycia snopem. Tutaj wchodzą kiełki gromadzące się nad snopem i zbierające się w większe źdźbła, ale ja sobie to odpuszczę.
\end{example}

\subsection{Funktory wierne, pełne}

\begin{definition}[podkategoria $\mathbf{C}'$ kategorii $\mathbf{C}$]
  To kategoria spełniająca następujące warunki:
  \begin{itemize}
    \item $Ob\mathbf{C}'\subseteq Ob\mathbf{C}$
    \item $Hom_{\mathbf{C}'}(X,Y)\subseteq Hom_{\mathbf{C}}(X, Y)$
    \item $id_X^{\mathbf{C}'}=id_X^{\mathbf{C}}$ zawsze gdy $X\in Ob\mathbf{C}'$
    \item złożenie morfizmów w $\mathbf{C}'$ zachowuje się tak samo jak w $\mathbf{C}$
  \end{itemize}

  Mówimy, że podkategoria $\mathbf{C}'$ jest \acc{pełna}, gdy dla wszystkich $X,Y\in\ob\mathbb{C}'$ zachodzi $Hom_{\mathbf{C}'}(X,Y)=Hom_{\mathbf{C}}(X,Y)$
\end{definition}

\begin{example}
\item Kategoria przestrzeni skończonego wymiaru $\mathbf{Vect}_K^{fin}$ jest podkategorią kategorii wszystkich przestrzeni liniowych $\mathbf{Vect}_K$. Jest to pełna podkategoria.
\item Analogicznie, kategoria grup abelowych $\mathbf{Ab}$ jest pełną podkategorią kategorii $\mathbf{Grp}$
\item Kategoria gładkich rozmaitości $\mathbf{C^\infty-rozm}$ jest podkategorią kateogorii wszystkich przestrzeni topologicznych $\mathbf{Top}$. Nie jest to jednak pełna podkategoria.
\end{example}

\begin{definition}[funktor wierny, pełny]
  Funkctor $F:\mathbf{C}\to\mathbf{D}$ jest
  \begin{itemize}
    \item \buff{wierny} gdy $F:Hom_{\mathbf{C}}(X,Y)\to Hom_{\mathbf{D}}(F(X),F(Y))$ jest injekcją
    \item \buff{pełny}, gdy dla wszystkich $X,Y\in Ob\mathbf{C}$ przekształcenie $F:Hom_{\mathbf{C}}(X,Y)\to Hom_{\mathbf{D}}(F(X),F(Y))$ jest surjekcją
  \end{itemize}
\end{definition}

\begin{example}
\item Włożenie podkategorii w kategorię jest funktorem wiernym
\item Jeśli podkategoria jest pełna, to taki włożeniowy funktor jest dodatkowo pełny.
\end{example}

\subsection{Naturalne przekształcenia funktorów}

\begin{definition}[naturalne przekształcenie funktorów]
  Dla dwóch funktorów $F, G:\mathbf{C}\to\mathbf{D}$ układ morfizmów $f:F\to G$ w $\mathbf{D}$ taki, że dla każdego $X\in Ob\mathbf{C}$ $f(X):F(X)\to G(X)$ i dla każdego $\phi:X\to Y\in Hom_{\mathbf{C}}(X, Y)$ diagram

  $ $

  \begin{center}
    \begin{tikzcd}[column sep=large]
      F(X) \arrow[r, "f(X)"] \arrow[d, "F(\phi)" left] & G(X)\arrow[d, "G(\phi)"]\\
      F(Y) \arrow[r, "f(Y)" below] & G(Y)
    \end{tikzcd}
  \end{center}

  $ $

  jest przemienny nazywamy \buff{naturalnym przekształceniem funktorów} $F$ i $G$.
\end{definition}

\begin{example}
\item Patrzymy na funktory $Id, ab:\mathbf{Grp}\to\mathbf{Grp}$ (identyczność i abelianizacja $ab(G)=G/[G,G]$).

  Rozważmymy $f:Id\to ab$, wtedy $Id(G)=G$, więc sprawdzamy, czy następujący diagram komutuje:

  \begin{center}
    \begin{tikzcd}[column sep=large]
      Id(G)=G \arrow[r, "f(G)"] \arrow[d, "Id(\phi)=\phi" left] & G/\left[G, G\right] = ab(G) \arrow[d, "ab(\phi)"] \\
      Id(H)=H \arrow[r, "f(H)"] & H/\left[H, H\right] = ab(H)
    \end{tikzcd}
  \end{center}

  Dla każdego $G\in Ob\mathbf{Grp}$ zdefiniujemy $f(G):Id(G)\to ab(G)$ jako
  $$f(G):G\to G^{alb}=G/[G,G]$$
  jako zwykłe przekształcenie ilorazowe. Aby więc diagram komutował, czyli
  $$f(H)\circ Id(\phi)=ab(\phi)\circ f(G),$$ 
  wystarczy sprawdzić, że komutant grupy $G$ przechodzi przez dowolny homomorfizm na komutant w $H$:
  $$(\forall\;g,h\in [G,G])\;\phi(gh)=\phi(g)\phi(h)=\phi(h)\phi(g)=\phi(hg).$$
  Skoro tak jest, to nie ma znaczenia, czy najpierw abelianizujemy grupę, a potem nakładamy na to homomorfizm, czy najpierw nakładamy homomorfizm, a potem abelianizujemy.

%  \begin{center}
%    \begin{tikzcd}
%      Id(G)=G \arrow[r, "Id(\phi)"] \arrow[d, "f(G)"] & H=Id(H) \arrow[d]\\
%      \left[G, G\right] \arrow[r] & \left[H,H\right]
%    \end{tikzcd}
%  \end{center}
\item Można pokazać, że istnieje naturalne przekształcenie funktorów z kategorii przestrzeni topologicznych z wybranym punktem bazowym ($\mathbf{Top}_*$) w kategorię grup 
  $$H_n, \Pi_n:\mathbf{Top}_*\to\mathbf{Grp},$$
  gdzie $\Pi_n$ to funktor przypisujący przestrzeni $n$-tą homotopię ($\Pi_1$ w szczególności przyporządkowuje przestrzeni topologicznej jej grupę fundamentalną), a $H_n$ to funktor $n$-tej homologii.
  %Z odrobiną znajomości topologii algebraicznej możemy pokazać, że istnieje naturalne przekształcenie funktorów $H_n,\Pi_n:\mathbf{Top}_*\to\mathbf{Grp}$. Jednak nie znam się na topologii algebraicznej, więc ja tego nie zrobię.
  
\item Pokażemy naturalne przekształcenie funktorów $Id,\star\star:\mathbf{Vect}_K\to\mathbf{Vect}_K$.
  
  Dla $V\in\mathbf{Vect}_K$ definiujemy
  \begin{center}
    \begin{tikzcd}[column sep=large]%, row sep=tiny]
      f(V):V \arrow[r] & V^{**}\\
      v \arrow[u, phantom, sloped, "\in"] \arrow[r] & (V^*\ni\phi^*\mapsto\phi^*(v)\in K)=\langle\cdot,v\rangle \arrow[u, phantom, sloped, "\in"]
    \end{tikzcd}
  \end{center}
  to znaczy, dla $v\in V$ mamy element $f(V)(v)=\langle\cdot, v\rangle\in V^{**}$, który elementowi $\phi^*\in V^*$ przyporządkowuje $\langle\phi^*,v\rangle=\phi^*(v)\in K$.

  Chcemy sprawdzić, że diagram
  \begin{center}
    \begin{tikzcd}[column sep=large]
      V \arrow[r, "f(V)"] \arrow[d, "\phi" left] & V^{**} \arrow[d, "\phi^{**}"] \\
      W \arrow[r, "f(W)" below] & W^{**}
    \end{tikzcd}
  \end{center}
  komutuje, czyli pokazać, że $f(V)\circ\phi^{**}=\phi\circ f(W)$.
  
  Troszkę przypomnienia z algebry liniowej. Przekształcenie liniowe $\phi:V\to W$ indukuje funkcjonał liniowy $\phi^*:W^*\to V^*$ taki, że dla $f:W\to K\in W^*$ mamy $\phi^*(f)=f\circ \phi\in V^*$. W takim razie, przekształcenie $\phi^{**}:V^{**}\to W^{**}$ dla $f^*:V^{*}\to K\in V^{**}$ przyporządkuje
  $$\phi^{**}(f^*)=f^*\circ\phi^*:W^*\to K$$
  \begin{align*}
    (\phi^{**}\circ f(V))(v)&=\phi^{**}(f(V)(v))=\phi^{**}(\langle\cdot,v\rangle)=\\
                            &=\langle\cdot,v\rangle\circ\phi^*=\langle\phi^*(\cdot),v\rangle=\\
                            &=\langle \cdot\circ\phi,v\rangle=\langle\cdot,\phi(v)\rangle=f(W)(\phi(v))=\\
                            &=(f(W)\circ\phi)(v)
  \end{align*}
  element $W^{**}$.

  Czyli wszystko się zgadza!
\end{example}

Naturalne przekształcenia można składać. Powstaje wtedy (meta)kategoria, której elementy to funktory, a morfizmami są naturalne przejścia. Nie jest to prawdziwa kategoria, bo morfizmy nie zawsze tworzą zbiory w takim przypadku. Taki twór oznaczamy $\color{blue}\mathbf{Funct}(\mathbf{C},\mathbf{D})$ i mając naturalne przekształcenia funktorów $F\overset{a}{\to} G\overset{b}{\to}H$, dowolne $X,Y\in Ob\mathbf{C}$ oraz $\phi:X\to Y$ rysujemy
\begin{center}
  \begin{tikzcd}[column sep=large]
    F(X) \arrow[r, "a(X)"] \arrow[d, "F(\phi)" left] & G(X) \arrow[r, "b(X)"] \arrow[d, "G(\phi)"] & H(X) \arrow[d, "H(\phi)"] \\
    F(Y) \arrow[r, "a(Y)" below] & G(Y) \arrow[r, "b(Y)" below] & H(Y)
  \end{tikzcd}
\end{center}
gdzie $(b\circ a)(X)=b(X)\circ a(X)$.

\begin{definition}[izomorfizm funktorów]
  W metakategorii funktorów możemy rozważać izomorfizmy, które nazywamy \buff{naturalnymi izomorfizmami funktorów}. Do ich definiowania można podejść na dwa, równoważne, sposoby:
  \begin{itemize}
    \item naturalne przekształcenia $f:F\to G$ dla których istnieje $g:G\to F$ takie, że $f\circ g=id_G$ oraz $g\circ f=id_F$
    \item przekształcenie $f:F\to G$ takie, że dla każdego $X\in\mathbf{C}$ przekształcenie $f(X):F(X)\to G(X)$ jest izomorfizmem w kategorii $\mathbf{D}$.
  \end{itemize}
\end{definition}

\begin{example}
  \item Przekształcenie funktorów $Id, **$ na kategorii przestrzeni wektorowych rozważane wyżej staje się izomorfizmem, gdy ograniczymy się do przestrzeni skończonego wymiaru.
\end{example}

\subsection{Równoważność kategorii}

\begin{definition}[równoważność kategorii]
  Funktor $F:\mathbf{C}\to\mathbf{D}$ zadaje \buff{równoważność kategorii}, jeśli istnieje funktor $G:\mathbf{D}\to\mathbf{C}$ oraz naturalny izomorfizm funktorów $f:F\circ G\to Id_{\mathbf{D}}$ i $g:G\circ F\to Id_{\mathbf{C}}$
\end{definition}

Równoważność kategorii jest nieco słabszym warunkiem niż istnienie izomorfizmu między kategoriami - złożenie $F\circ G$ niekoniecznie musi być równe $Id_{\mathbf{D}}$, wystarczy tylko żeby istniał naturalny izomorfizm między tymi dwoma funktorami.

\begin{example}
\item Kategoria skończenie wymiarowych przestrzeni wektorowych $\mathbf{Vect}_K^{fin}$ jest równoważna kategorii $\mathbf{S_K}$, której obiektami są $Ob\mathbf{S_K}=\{K^0,K^1,...,K^n,...\}$ a morfizmy to wszystkie przekształcenia liniowe między nimi.

  Funktor włożenia
  $$F:\mathbf{S_K}\to \mathbf{Vect}_K^{fin}$$
  jest oczywistym wyborem na pierwszy funktor, gdyż każdy obiekt z $\mathbf{S_K}$ jest przestrzenią wektorową skończonego wymiaru.

  Aby znaleźć funktor
  $$G:\mathbf{Vect}_K^{fin}\to\mathbf{S_K}$$
  zaczniemy od rozważenia na co przechodzi $V\in\mathbf{Vect}_K^{fin}$. Wiemy, że $\dim\mathbf{Vect}_K^{fin}=\infty$, możemy więc zdefiniować
  $$G(V)=K^{\dim\mathbf{Vect}_K^{fin}}.$$
  Pozostaje zastanowić się nad przekształceniem morfizmów. W każdym $V$ możemy wyróżnić pewną bazę, a każde przekształcenie liniowe $V\to W$ będzie macierzą o wyrazach w $K$ zapisaną w tych wyróżnionych bazach. Wystarczy więc przekształceniu $V\to W$ zadanemu macierzą przyporządkować przekształcenie wyznaczone przez taką samą macierz na $K^{\dim V}\to K^{\dim W}$.

\end{example}

\begin{theorem}
  Funktor $F:\mathbf{C}\to \mathbf{D}$ zadaje równoważność kategorii $\iff$ jest on wierny, pełny i w zasadzie surjektywny, tzn. $(\forall\;Y\in \ob\mathbf{D})(\exists\;X\in \ob\mathbf{C})\;F(X)\underset{\mathbf{D}}{\cong}Y$.
\end{theorem}

\begin{proof}
  $\impliedby$

  Wiemy, że funktor $F:\mathbf{C}\to\mathbf{D}$ jest wierny, pełny i w zasadzie suriektywny i na podstawie tej wiedzy skonstruujemy $G:\mathbf{D}\to\mathbf{C}$ jak w definicji równoważności kategorii.

  Dla $Y\in \ob\mathbf{D}$ wybieramy $G(Y)\in \ob\mathbf{C}$ takie, że istnieje izomorfizm $\iota_Y:Y\to F(G(Y))$. Możemy tak zrobić, gdyż $F$ jest w zasadzie suriektywny. 

  Niech $\phi:Y\to Y'$ będzie morfizmem obiektów w kategorii $\mathbf{D}$. Chcemy sprawdzić istnienie $G(\phi)$ takie, że mamy naturalny izomorfizm $Id_{\mathbf{D}}\leftrightarrow F\circ G$

  \begin{center}
    \begin{tikzcd}[column sep=large]
      Id_{\mathbf{D}}(Y)=Y \arrow[r, "\phi"] \arrow[d, "\iota_Y" left] & Y'=Id_{\mathbf{D}}(Y') \arrow[d, "\iota_{Y'}"]\\
      F(G(Y)) \arrow[r, "F(G(\phi))?" below] & F(G(Y'))
      %\iota_{Y'}\circ\phi\circ\iota_Y^{-1}" below ] & F(G(Y'))
    \end{tikzcd}
  \end{center}

  Ponieważ $\iota_Y$ jest izomorfizmem, dolną strzałkę $F(G(Y))\to F(G(Y'))$ możemy podpisać jako $\iota_{Y'}\circ\phi\circ\iota_Y^{-1}$. Chcemy pokazać, że da się dobrać $G(\phi)$ tak, żeby $F(G(\phi))=\iota_{Y'}\circ\phi\circ\iota_Y^{-1}$, tzn. żeby diagram na górze komutował.

  $F$ jest wierny i pełny, więc przejście
  $$Hom_{\mathbf{C}}(G(Y),G(Y'))\overset{F}{\rightarrow}Hom_{\mathbf{D}}(F(G(Y)),F(G(Y')))$$
  jest jednocześnie bijekcją i inijekcją, czyli możemy je odwracać. Istnieje więc jedyne 
  $$\psi=F^{-1}(\iota_{Y'}\phi\iota_Y^{-1}):G(Y)\to G(Y')$$
  które możemy przypisać do $G(\phi)=\psi$. Zbiór izomorfizmów $\iota_Y$ zadaje więc naturalny izomorfizm $Id_{\mathbf{D}}\to F\circ G$:
  \begin{center}\begin{tikzcd}[column sep=3cm, row sep=large]
    Y \arrow[d, "\iota_Y" left] \arrow[r, "\phi"] & Y' \arrow[d, "\iota_{Y'}"] \\ 
    F(G(Y)) \arrow[r, "F(G(\phi))=F(\psi)=\iota_{Y'}\phi\iota_Y^{-1}" below] & F(G(Y'))
  \end{tikzcd}\end{center}

  Pozostaje sprawdzić, że dla tak zdefiniowanego $G$ istnieje również naturalne przekształcenie $Id_{\mathbf{C}}\to G\circ F$.

  Dla $X, X'\in\ob\mathbf{C}$ oraz $\psi:X\to X'$ istnieje izomorfizm $F(X)\cong F(G(F(X)))$, gdyż tak właśnie zdefiniowaliśmy funktor $G$. Aby utrzymać konwencję z powyższego fragmentu dowodu, naziwjmy te izomorfizmy odpowiednio $\iota_{F(X)}$ i $\iota_{F(X')}$:
  \begin{center}\begin{tikzcd}
    F(X)\arrow[r, "\iota_{F(X)}"] \arrow[d, "F(\psi)" left] & F(G(F(X))) \arrow[d, "F(G(F(\psi)))"] \\ 
    F(X') \arrow[r, "\iota_{F(X')}" below] & F(G(F(X')))
  \end{tikzcd}\end{center}
  Ponieważ $F$ jest wiernym i pełnym funktorem, to możemy najbardziej zewnętrzne $F$ zdjąć, by otrzymać diagram:
  \begin{center}\begin{tikzcd}[column sep=large]
    X\arrow[r, "F^{-1}(\iota_{F(X)})"] \arrow[d, "\psi" left] & G(F(X)) \arrow[d, "G(F(\psi))"] \\ 
    X' \arrow[r, "F^{-1}(\iota_{F(X')})" below] & G(F(X'))
  \end{tikzcd}\end{center}
  Ponieważ diagram przed zdjęciem $F$ był przemienny, to również diagram niżej musi taki być - w końcu to zwykłe nałożenie $F^{-1}$ na wszystkie elementy i strzałki. W takim razie, morfizmy $F^{-1}(\iota_{F(X)})$ zadają naturalny izomorfizm $Id_{\mathbf{C}}\to G\circ F$.

  $\implies$

  Dowód drugiej implikacji zostaje pozostawiony jako ćwiczenie.
\end{proof}
